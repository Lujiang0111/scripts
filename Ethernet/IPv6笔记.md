# IPv6笔记

## IPv6地址分类

1. AGUA(Aggregate Global unicast Address)聚合全局单播地址, 其实就是所谓设备上配置的公网IP地址。
    + 地址范围：2000::/3
    + 地址开始: 2000:0000:0000:0000:0000:0000:0000:0000
    + 地址结束: 3FFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF
    + 一般主机分配的地址: 2001::/16

2. Link-Local Address, 本地链路地址, 没申请公网地址时, 实现路由设备之间的地址配送通讯, 也可用作路由表的下一条地址。
    + 地址范围：FE80::/10

3. Site-Local Address, 本地站点地址, 私网IP地址。
    + 地址范围：FEC0::/10

4. Unspecified and Loopback Address, 未指定和环回接口地址。

    + 未指定地址:自动获取网络地址过程中, 表示网卡的地址信息的地址：0000:0000:0000:0000:0000:0000:0000:0000(简写::)
    + 环回接口地址(127.0.0.1)：0000:0000:0000:0000:0000:0000:0000:0001(简写::1)

5. IPV4-Compatible Address, IPV4兼容地址。
    + 192.0.2.100->0:0:0:0:0:0:C000.0264=::192.0.2.100=::C000.02

## IPv6组播地址

Pv6组播地址是由固定的8bit地址前缀FF::/8(prefix)，4bit的标志位(flags)，4bit组播范围(scope)和112bit多播组标识符（group id）组成。

```rfc
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 0 |    prefix     | flags | scope |                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
 4 |                                                               |
   +                           group ID                            +
 8 |                                                               |
   +                                                               +
12 |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

1. prefix
    + 固定为FF
2. flags
    + 高三位固定为0
    + 低1bit位如果为0，则表示为“永久性多播地址”，如果为1就是“临时性多播地址”。
3. scope
    | 二进制 | 十六进制 | 范围类型 |
    | :----:| :----: | :----: |
    | 0001 | 1 | 本地接口范围 |
    | 0010 | 2 | 本地链路范围 |
    | 0011 | 3 | 本地子网范围 |
    | 0100 | 4 | 本地管理范围 |
    | 0101 | 5 | 本地站点范围 |
    | 1000 | 8 | 组织结构范围 |
    | 1110 | E | 全球范围 |

最常用的组播地址：FF02::1

## linux设定ipv6地址

### 使用ifconfig

1. 添加ipv6地址：```ifconfig <interface> inet6 add <ipv6address>/<prefixlength>```
2. 移除ipv6地址：```ifconfig <interface> inet6 del <ipv6address>/<prefixlength>```

注意：ifconfig命令为临时操作，重启后恢复。
